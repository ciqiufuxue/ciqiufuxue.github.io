(function(){var e={46700:function(e,t,s){var o={"./af":63906,"./af.js":63906,"./ar":40902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":20299,"./ar-kw.js":20299,"./ar-ly":96825,"./ar-ly.js":96825,"./ar-ma":66379,"./ar-ma.js":66379,"./ar-sa":87700,"./ar-sa.js":87700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":40902,"./az":76043,"./az.js":76043,"./be":7936,"./be.js":7936,"./bg":34078,"./bg.js":34078,"./bm":14014,"./bm.js":14014,"./bn":29554,"./bn-bd":17114,"./bn-bd.js":17114,"./bn.js":29554,"./bo":6529,"./bo.js":6529,"./br":65437,"./br.js":65437,"./bs":19647,"./bs.js":19647,"./ca":59951,"./ca.js":59951,"./cs":26113,"./cs.js":26113,"./cv":37965,"./cv.js":37965,"./cy":35858,"./cy.js":35858,"./da":33515,"./da.js":33515,"./de":62831,"./de-at":6263,"./de-at.js":6263,"./de-ch":51127,"./de-ch.js":51127,"./de.js":62831,"./dv":4510,"./dv.js":4510,"./el":68616,"./el.js":68616,"./en-au":24595,"./en-au.js":24595,"./en-ca":73545,"./en-ca.js":73545,"./en-gb":79609,"./en-gb.js":79609,"./en-ie":43727,"./en-ie.js":43727,"./en-il":93302,"./en-il.js":93302,"./en-in":46305,"./en-in.js":46305,"./en-nz":39128,"./en-nz.js":39128,"./en-sg":84569,"./en-sg.js":84569,"./eo":50650,"./eo.js":50650,"./es":26358,"./es-do":64214,"./es-do.js":64214,"./es-mx":38639,"./es-mx.js":38639,"./es-us":30232,"./es-us.js":30232,"./es.js":26358,"./et":47279,"./et.js":47279,"./eu":15515,"./eu.js":15515,"./fa":27981,"./fa.js":27981,"./fi":37090,"./fi.js":37090,"./fil":79208,"./fil.js":79208,"./fo":2799,"./fo.js":2799,"./fr":23463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":52848,"./fr-ch.js":52848,"./fr.js":23463,"./fy":41468,"./fy.js":41468,"./ga":88163,"./ga.js":88163,"./gd":2898,"./gd.js":2898,"./gl":76312,"./gl.js":76312,"./gom-deva":20682,"./gom-deva.js":20682,"./gom-latn":49178,"./gom-latn.js":49178,"./gu":31400,"./gu.js":31400,"./he":52795,"./he.js":52795,"./hi":17009,"./hi.js":17009,"./hr":46506,"./hr.js":46506,"./hu":69565,"./hu.js":69565,"./hy-am":93864,"./hy-am.js":93864,"./id":5626,"./id.js":5626,"./is":36649,"./is.js":36649,"./it":90151,"./it-ch":95348,"./it-ch.js":95348,"./it.js":90151,"./ja":79830,"./ja.js":79830,"./jv":33751,"./jv.js":33751,"./ka":63365,"./ka.js":63365,"./kk":85980,"./kk.js":85980,"./km":99571,"./km.js":99571,"./kn":25880,"./kn.js":25880,"./ko":16809,"./ko.js":16809,"./ku":96773,"./ku.js":96773,"./ky":65505,"./ky.js":65505,"./lb":50553,"./lb.js":50553,"./lo":51237,"./lo.js":51237,"./lt":91563,"./lt.js":91563,"./lv":61057,"./lv.js":61057,"./me":96495,"./me.js":96495,"./mi":83096,"./mi.js":83096,"./mk":43874,"./mk.js":43874,"./ml":46055,"./ml.js":46055,"./mn":87747,"./mn.js":87747,"./mr":17113,"./mr.js":17113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":14532,"./mt.js":14532,"./my":4655,"./my.js":4655,"./nb":56961,"./nb.js":56961,"./ne":2512,"./ne.js":2512,"./nl":48448,"./nl-be":72936,"./nl-be.js":72936,"./nl.js":48448,"./nn":49031,"./nn.js":49031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":30118,"./pa-in.js":30118,"./pl":93448,"./pl.js":93448,"./pt":33518,"./pt-br":62447,"./pt-br.js":62447,"./pt.js":33518,"./ro":70817,"./ro.js":70817,"./ru":10262,"./ru.js":10262,"./sd":58990,"./sd.js":58990,"./se":43842,"./se.js":43842,"./si":37711,"./si.js":37711,"./sk":80756,"./sk.js":80756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":40732,"./sr-cyrl":75713,"./sr-cyrl.js":75713,"./sr.js":40732,"./ss":99455,"./ss.js":99455,"./sv":69770,"./sv.js":69770,"./sw":80959,"./sw.js":80959,"./ta":36459,"./ta.js":36459,"./te":25302,"./te.js":25302,"./tet":67975,"./tet.js":67975,"./tg":71294,"./tg.js":71294,"./th":2385,"./th.js":2385,"./tk":24613,"./tk.js":24613,"./tl-ph":58668,"./tl-ph.js":58668,"./tlh":58190,"./tlh.js":58190,"./tr":74506,"./tr.js":74506,"./tzl":63440,"./tzl.js":63440,"./tzm":69852,"./tzm-latn":42350,"./tzm-latn.js":42350,"./tzm.js":69852,"./ug-cn":70730,"./ug-cn.js":70730,"./uk":40099,"./uk.js":40099,"./ur":72100,"./ur.js":72100,"./uz":96002,"./uz-latn":26322,"./uz-latn.js":26322,"./uz.js":96002,"./vi":14207,"./vi.js":14207,"./x-pseudo":24674,"./x-pseudo.js":24674,"./yo":10570,"./yo.js":10570,"./zh-cn":73644,"./zh-cn.js":73644,"./zh-hk":22591,"./zh-hk.js":22591,"./zh-mo":89503,"./zh-mo.js":89503,"./zh-tw":88080,"./zh-tw.js":88080};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=n,e.exports=a,a.id=46700},18440:function(){},72092:function(e,t,s){"use strict";var o=s(36369),a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},n=[],r=s(18440),i=s.n(r),l=i(),c=s(1001),u=(0,c.Z)(l,a,n,!1,null,null,null),d=u.exports,p=s(72631),h=(s(57658),function(){var e=this,t=e._self._c;return t("a-layout",[t("div",{staticClass:"login"},[t("div",{staticClass:"main"},[t("div",{staticClass:"input-box"},[t("div",{staticClass:"logo"},[t("h3",[e._v("畅聊")])]),t("div",{staticClass:"username"},[t("a-input",{attrs:{placeholder:"用户名"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}},[t("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),t("div",{staticClass:"passwd"},[t("a-input-password",{attrs:{placeholder:"密码"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[t("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),t("div",{staticClass:"login-btn"},[t("a-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1),t("div",{staticClass:"to-register"},[t("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$router.push("/register")}}},[e._v("还没账号？点击注册")])])]),t("AWord")],1)])])}),m=[],g=s(98510),f=s.n(g),v=s(63822);o.ZP.use(v.ZP);var b=new v.ZP.Store({state:{access_token:String,superAdminArr:[],registerCode:0,token:String,List:[{name:"好友",arr:[]},{name:"群组",arr:[]},{name:"聊天室",arr:[]},{name:"黑名单",arr:[]}],userId:"用户名",charArr:[],msgTips:{},friendsEventVal:[],userInfo:{nickname:null,sign:null,gender:null,phone:null,birth:null},friendsInfo:{nickname:"未设置",sign:"未设置",gender:"未设置",phone:"未设置",birth:"未设置"},chatRoom:[],groupInfo:[],groupMember:[],chatRoomInfo:[],chatRoomMember:[],chatHistoryArr:[]},getters:{friendsEventStatus(e){return 0!=e.friendsEventVal.length&&(!!e.friendsEventVal||void 0)}},mutations:{setToken(e,t){e.token=t},setSuperAdminList(e,t){e.superAdminArr=t},setAccessToken(e,t){e.access_token=t},setList(e,t){let s=t.filter((t=>!e.List[3].arr.some((e=>e===t))));setTimeout((()=>{e.List[0].arr=s}),1e3)},setuserInfo(e,t){e.userInfo=t},getuserInfo(e,t){e.userInfo=t},getfriendsInfo(e,t){t.nickname?e.friendsInfo.nickname=t.nickname:e.friendsInfo.nickname="未设置",t.sign?e.friendsInfo.sign=t.sign:e.friendsInfo.sign="未设置",t.gender?e.friendsInfo.gender=t.gender:e.friendsInfo.gender="未设置",t.phone?e.friendsInfo.phone=t.phone:e.friendsInfo.phone="未设置",t.birth?e.friendsInfo.birth=t.birth:e.friendsInfo.birth="未设置"},addList(e,t){e.List[0].arr.push(t)},friendsEventValFunc(e,t){e.friendsEventVal.map(((s,o)=>{s.from==t.from&&e.friendsEventVal.splice(o,1)})),e.friendsEventVal=[...e.friendsEventVal,t]},delFriendEventFunc(e,t){e.friendsEventVal.map(((s,o)=>{s.from==t&&e.friendsEventVal.splice(o,1)}))},msgTipsFunc(e,t){e.msgTips=t},removeList(e,t){e.List[0].arr=e.List[0].arr.filter((e=>e!==t))},setGroupList(e,t){e.List[1].arr=t},setBlackList(e,t){e.List[3].arr=t},removeBlckList(e,t){e.List[3].arr=e.List[3].arr.filter((e=>e!==t))},addBlackList(e,t){e.List[3].arr.push(t)},addGroupList(e,t){e.List[1].arr.push(t)},setRoomList(e,t){e.List[2].arr.push(t)},setUserId(e,t){e.userId=t},setCharArr(e,t){let s=e.charArr.findIndex((e=>e.to===t.to)),o=e.charArr.findIndex((e=>e.to===t.from));if(-1!==o&&e.charArr[o].arr.push(t),-1===s){let s={to:t.to,from:t.from,arr:[],ifFile:t.ifFile};s.arr.push(t),e.charArr.push(s)}else-1!==s&&e.charArr[s].arr.push(t)},setChatRoom(e,t){e.chatRoom=t},setGroupInfo(e,t){e.groupInfo=t},setGroupMember(e,t){e.groupMember=t},removeGroup(e,t){e.List[1].arr=e.List[1].arr.filter((e=>e.groupid!==t))},removeGroupMember(e,t){e.groupMember=e.groupMember.filter((e=>e!==t))},chatRoomInfo(e,t){e.chatRoomInfo=t},chatRoomMember(e,t){e.chatRoomMember=t},removeChatRoom(e,t){e.chatRoom=e.chatRoom.filter((e=>e.id!==t))},leaveChatRoom(e,t){e.List[2].arr=e.List[2].arr.filter((e=>e.id!==t))},chatHistoryArr(e,t){e.chatHistoryArr=t.messages.reverse()}},actions:{},modules:{}});const k={xmppURL:"im-api.easemob.com",apiURL:"http://a1.easemob.com",appkey:"1183221025099577#demo",https:!1,isHttpDNS:!0,isMultiLoginSessions:!1,isAutoLogin:!0,isDebug:!0,autoReconnectNumMax:2,autoReconnectInterval:2,heartBeatWait:4500,delivery:!1};var y=k,_=s(78852),C=s.n(_);let I={};I=window.WebIm=C(),I.config=y,I.conn=new I.connection({isReport:!1,appKey:I.config.appkey,isMultiLoginSessions:I.config.isMultiLoginSessions,https:I.config.https,isAutoLogin:!0,heartBeatWait:I.config.heartBeatWait,autoReconnectNumMax:I.config.autoReconnectNumMax,autoReconnectInterval:I.config.autoReconnectInterval,isStropheLog:I.config.isStropheLog,delivery:I.config.delivery});var x=I;x.conn.addEventHandler("eventName",{onOpened:function(){},onClosed:function(){},onTextMessage:function(e){console.log("收到消息",e.type,e.msg,e.from,e.ext.key1);let t={type:e.type,msg:e.msg,from:e.from,key:e.ext.key1};b.commit("msgTipsFunc",t),b.commit("setCharArr",e)},onEmojiMessage:function(e){console.log(e)},onPictureMessage:function(e){console.log(e)},onCmdMessage:function(e){console.log(e)},onAudioMessage:function(e){console.log(e)},onLocationMessage:function(e){console.log(e)},onFileMessage:function(e){console.log(e)},onCustomMessage:function(e){console.log(e)},onVideoMessage:function(e){var t=document.getElementById("privateVideo"),s={url:e.url,headers:{Accept:"audio/mp4"},onFileDownloadComplete:function(e){var s=x.utils.parseDownloadResponse.call(x.conn,e);t.src=s},onFileDownloadError:function(){console.log("File down load error.")}};x.utils.download.call(x.conn,s)},onPresence:function(e){switch(console.log(e),e.type){case"rmGroupMute":break;case"muteGroup":break;case"rmUserFromGroupWhiteList":break;case"addUserToGroupWhiteList":break;case"deleteFile":break;case"uploadFile":break;case"deleteAnnouncement":break;case"updateAnnouncement":break;case"removeMute":break;case"addMute":break;case"removeAdmin":break;case"addAdmin":break;case"changeOwner":break;case"direct_joined":break;case"leaveGroup":break;case"memberJoinPublicGroupSuccess":break;case"removedFromGroup":break;case"invite_decline":break;case"invite_accept":break;case"invite":break;case"joinPublicGroupDeclined":break;case"joinPublicGroupSuccess":break;case"joinGroupNotifications":break;case"leave":break;case"join":break;case"deleteGroupChat":break;default:break}},onInviteMessage:function(e){console.log(e)},onOnline:function(){},onOffline:function(){},onError:function(e){console.log(e)},onBlacklistUpdate:function(e){console.log(e)},onRecallMessage:function(e){console.log(e)},onReceivedMessage:function(e){console.log(e)},onDeliveredMessage:function(e){console.log(e)},onReadMessage:function(e){console.log(e)},onCreateGroup:function(e){console.log(e)},onMutedMessage:function(e){console.log(e)},onChannelMessage:function(e){console.log(e)}}),x.conn.addEventHandler("contactEvent",{onContactInvited:function(e){console.log("好友请求",e),b.commit("friendsEventValFunc",e)},onContactDeleted:function(e){console.log("被删除好友",e)},onContactAdded:function(e){console.log("新增了联系人",e)},onContactRefuse:function(e){console.log("好友请求被拒绝",e)},onContactAgreed:function(e){console.log("好友请求经过了对方同意",e),M()}});let w=(e,t)=>{x.conn.open({user:e,pwd:t}).then((t=>{console.log(t);let s={token:t.accessToken,userId:e};f().set("token",JSON.stringify(s),1),b.commit("setUserId",e),L(e),console.log("账号登录成功")})).catch((e=>{console.log(e)}))},j=(e,t)=>{x.conn.open({user:e,accessToken:t}).then((t=>{b.commit("setUserId",e),M(),A(),D(),L(e),B(),console.log("token登录",t)})).catch((e=>{console.log("login fail",e)}))},S=(e,t)=>{const s={username:e,password:t,nickname:e};x.conn.registerUser(s).then((e=>{console.log(e.application),b.state.registerCode=200})).catch((e=>{let t=JSON.parse(e.data);"duplicate_unique_property_exists"===t.error?(console.log("用户已存在！"),b.state.registerCode=400):"illegal_argument"===t.error?"USERNAME_TOO_LONG"===t.error_description?console.log("用户名超过64个字节！"):console.log("用户名不合法！"):"unauthorized"===t.error?console.log("注册失败，无权限！"):"resource_limited"===t.error&&console.log("您的App用户注册数量已达上限,请升级至企业版！")}))},$=()=>{x.conn.close(),f()["delete"]("token")},M=()=>{x.conn.getContacts().then((e=>{setTimeout((()=>{b.commit("setList",e.data)}),1e3),console.log("好友列表",e.data)}))};const R=e=>{x.conn.acceptInvitation(e),b.commit("delFriendEventFunc",e)},T=e=>{x.conn.declineInvitation(e),b.commit("delFriendEventFunc",e)};let A=()=>{x.conn.getJoinedGroups({pageNum:1,pageSize:20,needAffiliations:!1,needRole:!1}).then((e=>{b.commit("setGroupList",e.data),console.log("群列表",e.data)}))},D=()=>{let e={pagenum:1,pagesize:20};x.conn.getChatRooms(e).then((e=>{b.commit("setChatRoom",e.data),console.log("聊天室",e.data)}))},G=(e,t,s,o,a)=>{let n={type:"txt",msg:e,from:o,to:s,chatType:t,ext:{key1:a}},r=x.message.create(n);x.conn.send(r).then((()=>{console.log(`${s}已经接收到消息`),b.commit("setCharArr",r)})).catch((e=>{console.log("发送失败",e)}))},L=(e,t)=>{x.conn.fetchUserInfoById(e).then((e=>{console.log("获取个人信息",e.data),2===t?b.commit("getfriendsInfo",Object.values(e.data)[0]):b.commit("getuserInfo",Object.values(e.data)[0])}))},E=e=>{x.conn.updateUserInfo(e).then((e=>{console.log("设置个人信息",e)}))},N=(e,t)=>{x.conn.addContact(e,t||"加个好友呗")},O=e=>{x.conn.joinGroup(e).then((e=>{console.log("已发送群申请",e)}))},z=e=>{WebIM.conn.getHistoryMessages(e).then((e=>{console.log("getmegs",e),b.commit("chatHistoryArr",e)}))},F=(e,t,s,o)=>{let a={data:{groupname:e,desc:t,mebers:b.state.userId,public:1===s,approval:1===o,allowinvites:!0,inviteNeedConfirm:!0,maxusers:500}};x.conn.createGroup(a).then((t=>{console.log("已创建群聊",t),b.commit("addGroupList",e)}))},U=e=>{b.state.List[0].arr=b.state.List[0].arr.filter((t=>t!==e)),x.conn.deleteContact(e)},B=()=>{x.conn.getBlocklist().then((e=>{console.log("黑名单",e.data),b.commit("setBlackList",e.data)}))},P=e=>{x.conn.removeUserFromBlocklist({name:e}),b.commit("removeBlckList",e),b.commit("addList",e),console.log(e,"已移除黑名单")},H=e=>{x.conn.addUsersToBlocklist({name:e}),console.log(e,"已加入黑名单"),b.commit("removeList",e),b.commit("addBlackList",e)},Z=(e,t)=>{let s={roomId:e,message:"reason"};x.conn.joinChatRoom(s).then((e=>{let s={...e.data,name:t};b.commit("setRoomList",s),console.log("已加入聊天室",e)}))},q=e=>{let t={groupId:e};x.conn.getGroupInfo(t).then((t=>{b.commit("setGroupInfo",t.data[0]),console.log("群详情",t.data),V(e)}))},V=e=>{let t=1,s=100,o={pageNum:t,pageSize:s,groupId:e};x.conn.listGroupMembers(o).then((e=>{b.commit("setGroupMember",e.data.reverse()),console.log("群成员列表",e.data)}))},W=e=>{let t={groupId:e};x.conn.destroyGroup(t).then((t=>{b.commit("removeGroup",e),console.log("群组已经解散",t)}))},J=(e,t)=>{let s={groupId:e,username:t};x.conn.removeGroupMember(s).then((s=>{b.commit("removeGroupMember",t),console.log(`${t}已被提出${e}`,s)}))},K=e=>{let t={groupId:e};x.conn.leaveGroup(t).then((t=>{b.commit("removeGroup",e),console.log("已退出群聊",t)}))},Q=e=>{let t={chatRoomId:e};x.conn.getChatRoomDetails(t).then((t=>{b.commit("chatRoomInfo",t.data[0]),X(e),console.log("聊天室详情",t.data[0])}))},X=e=>{let t={pageNum:1,pageSize:10,chatRoomId:e};x.conn.listChatRoomMembers(t).then((e=>{b.commit("chatRoomMember",e.data),console.log("聊天室成员",e.data)}))},Y=(e,t)=>{let s={chatRoomId:e,username:t};x.conn.removeChatRoomMember(s).then((s=>{console.log(`已将${t}移除${e}`,s)}))},ee=e=>{let t={roomId:e};x.conn.leaveChatRoom(t).then((t=>{b.commit("leaveChatRoom",e),console.log("已退出聊天室",t)}))},te=e=>{let t={chatRoomId:e};x.conn.destroyChatRoom(t).then((t=>{b.commit("removeChatRoom",e),console.log("已解散聊天室",t)}))};var se=function(){var e=this,t=e._self._c;return t("div",{staticClass:"a-word"},[t("div",{staticClass:"text"},[t("p",[e._v(e._s(e.hitokoto))]),t("span",[e._v("--"+e._s(e.author))])])])},oe=[],ae={name:"AWord",data(){return{hitokoto:"",author:""}},created(){this.gethitokoto()},methods:{async gethitokoto(){let{data:e}=await this.$axios.get("https://tenapi.cn/yiyan/?format=json");this.hitokoto=e.hitokoto,this.author=e.author}}},ne=ae,re=(0,c.Z)(ne,se,oe,!1,null,"1cabc95c",null),ie=re.exports,le={name:"loginView",data(){return{userId:"",password:""}},components:{AWord:ie},created(){f().get("token")&&this.$router.push("/index"),this.$route.query.state&&this.$message.error("客官您尚未登录,请进行登录!")},methods:{login(){w(this.userId,this.password),setTimeout((()=>{this.setToken(f().get("token")),f().get("token")?this.$message.success("客官欢迎您回来！"):this.$message.error("客官您的账号密码不对哦,请再输入试试。"),this.$route.query.state?this.goBack():(this.$router.push("/index"),M(),A(),B())}),500)},goBack(){setTimeout((()=>{this.$router.push(this.$route.query.redirect)}),500)},...(0,v.OI)(["setToken"])}},ce=le,ue=(0,c.Z)(ce,h,m,!1,null,null,null),de=ue.exports,pe=function(){var e=this,t=e._self._c;return t("a-layout",[t("div",{staticClass:"register"},[t("div",{staticClass:"main"},[t("div",{staticClass:"input-box"},[t("div",{staticClass:"theme"},[t("h3",[e._v("畅聊")])]),t("div",{staticClass:"userId"},[t("a-input",{attrs:{placeholder:"用户名"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}},[t("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),t("div",{staticClass:"passwd"},[t("a-input-password",{attrs:{placeholder:"密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[t("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),t("div",{staticClass:"phoneNum"},[t("a-input",{attrs:{placeholder:"手机号码"},model:{value:e.phoneNum,callback:function(t){e.phoneNum=t},expression:"phoneNum"}},[t("a-icon",{attrs:{slot:"prefix",type:"phone"},slot:"prefix"})],1)],1),t("div",{staticClass:"verification-code"},[t("a-input",{staticClass:"verificationCode",style:{width:"55%"},attrs:{type:"text",placeholder:"手机验证码"},model:{value:e.phoneSMSCode,callback:function(t){e.phoneSMSCode=t},expression:"phoneSMSCode"}},[t("a-icon",{attrs:{slot:"prefix",type:"mobile"},slot:"prefix"})],1),t("a-button",{directives:[{name:"show",rawName:"v-show",value:e.countdownBtn,expression:"countdownBtn"}],attrs:{type:"primary"},on:{click:e.getSMSCode}},[e._v(" 获取验证码 ")]),t("a-button",{directives:[{name:"show",rawName:"v-show",value:!e.countdownBtn,expression:"!countdownBtn"}],attrs:{type:"primary",disabled:""}},[e._v(" "+e._s(e.countdown)+"秒后再次获取 ")])],1),t("div",{staticClass:"register-btn"},[t("a-button",{staticClass:"register-btn",attrs:{type:"primary"},on:{click:e.userRegister}},[e._v("注册 ")])],1),t("div",{staticClass:"to-login"},[t("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$router.push("/login")}}},[e._v("有账号，点击登入")])])]),t("AWord")],1)])])},he=[],me=s(74806),ge=s.n(me),fe=s(56265),ve=s.n(fe);const be=()=>{const e={method:"POST",url:"http://a1.easecdn.com/1183221025099577/demo/token",data:{grant_type:"client_credentials",client_id:"YXA6iODtHdgbTNycDtlNHQrdtA",client_secret:"YXA6Qv71u9Hgfh3ZOdgipuRhKQz9Z-I",ttl:"360"}};ve().request(e).then((function(e){b.commit("setAccessToken",e.data.access_token),b.state.access_token&&console.log("access_token",e)})).catch((function(e){console.error(e)}))},ke=()=>{be(),setTimeout((()=>{const e={method:"GET",url:"http://a1.easemob.com/1183221025099577/demo/chatrooms/super_admin",headers:{Authorization:`Bearer ${b.state.access_token}`}};ve().request(e).then((function(e){b.commit("setSuperAdminList",e.data.data),console.log("getSuperAdmin",e.data)})).catch((function(e){console.error(e)}))}),1e3),console.log("token",b.state.access_token)},ye=(e,t)=>{const s={method:"POST",url:"http://a1.easecdn.com/1183221025099577/demo/sms/send",headers:{Authorization:`Bearer ${b.state.access_token}`,"Content-Type":"application/json"},data:{mobiles:[e],tid:"1080",tmap:{code:t}}};ve().request(s).then((function(e){console.log("getSMS",e.data)})).catch((function(e){console.error(e)}))};var _e={name:"RegisterView",components:{AWord:ie},data(){return{userId:"",password:"",phoneNum:null,countdown:60,countdownBtn:!0,ranomNum:ge().random(1e3,9999),phoneSMSCode:null}},computed:{...(0,v.rn)(["registerCode"])},watch:{registerCode(e){200==e&&(this.$message.success("注册成功"),setTimeout((()=>{this.$router.push("/")}),500)),400==e&&this.$message.error("用户已存在！"),setTimeout((()=>{this.$store.state.registerCode=0}),100)}},created(){f().get("token")&&this.$router.push("/index"),this.$route.query.state&&this.$message.error("客官您尚未登录,请进行登录!")},mounted(){f().get("token")&&(this.$router.push("/index"),console.log("已有账号请去主页登入")),be()},methods:{getSMSFunc(){/^(?:(?:\+|00)86)?1[3-9]\d{9}$/.test(this.phoneNum)?(this.counDownNum(),ye(this.phoneNum,this.ranomNum)):this.$message.error("请检查您的手机号码是否输入正确")},getSMSCode:ge().throttle((function(){this.getSMSFunc()}),1e3),counDownNum(){console.log("counDownNum"),this.countdownBtn=!1;let e=setInterval((()=>{this.countdown>0&&this.countdown--,0==this.countdown&&(console.log("countdown End"),this.countdownBtn=!0,this.countdown=60,clearInterval(e))}),1e3)},userRegister(){this.userId&&this.password&&this.phoneNum&&this.ranomNum==this.phoneSMSCode?S(this.userId,this.password):this.$message.error("验证码不正确")},...(0,v.OI)(["setToken"])}},Ce=_e,Ie=(0,c.Z)(Ce,pe,he,!1,null,null,null),xe=Ie.exports,we=function(){var e=this,t=e._self._c;return t("div",[t("a-layout",{attrs:{id:"components-layout-demo-custom-trigger"}},[t("a-layout-sider",{attrs:{trigger:null,collapsible:""},model:{value:e.collapsed,callback:function(t){e.collapsed=t},expression:"collapsed"}},[t("div",{staticClass:"logo"},[t("a-input-search",{ref:"search"})],1),t("a-menu",{attrs:{theme:"dark",mode:"inline","default-selected-keys":["1"],"default-open-keys":["sub1"]}},e._l(e.List,(function(s,o){return t("a-sub-menu",{key:o},["好友"===s.name?t("span",{attrs:{slot:"title"},slot:"title"},[t("a-icon",{attrs:{type:"user"}}),t("span",[e._v(e._s(s.name))])],1):e._e(),"群组"===s.name?t("span",{attrs:{slot:"title"},slot:"title"},[t("a-icon",{attrs:{type:"team"}}),t("span",[e._v(e._s(s.name))])],1):e._e(),"聊天室"===s.name?t("span",{attrs:{slot:"title"},slot:"title"},[t("a-icon",{attrs:{type:"usergroup-add"}}),t("span",[e._v(e._s(s.name))])],1):e._e(),"黑名单"===s.name?t("span",{attrs:{slot:"title"},slot:"title"},[t("a-icon",{attrs:{type:"meh"}}),t("span",[e._v(e._s(s.name))])],1):e._e(),e._l(s.arr,(function(o,a){return t("a-menu-item",{key:o.id??o.groupid??o+a,on:{click:function(t){return e.getUserID(o.name??o.groupname??o,s.name,o.id??o.groupid??o)}}},[e._v(" "+e._s(o.name??o.groupname??o)+" ")])}))],2)})),1)],1),t("a-layout",[t("a-layout-header",{staticStyle:{background:"#fff",padding:"0"}},[t("a-icon",{staticClass:"trigger",style:{padding:"0",margin:"0 24px 0 24px",lineHeight:"0"},attrs:{type:e.collapsed?"menu-unfold":"menu-fold"},on:{click:()=>e.collapsed=!e.collapsed}}),t("a-popover",{attrs:{placement:"bottom"}},[t("template",{slot:"content"},[t("p",{style:{textAlign:"center"},on:{click:function(t){return e.showModal(1)}}},[e._v("添加好友")]),t("p",{style:{textAlign:"center"},on:{click:function(t){return e.showModal(2)}}},[e._v("添加群")]),t("p",{style:{textAlign:"center"},on:{click:function(t){return e.showModal(3)}}},[e._v("添加聊天室")])]),t("a-icon",{staticClass:"trigger",style:{margin:"0 24px 0 0",lineHeight:"0",padding:"0"},attrs:{type:"user-add"}})],2),t("a-popover",{attrs:{placement:"bottom"}},[t("template",{slot:"content"},[t("p",{style:{textAlign:"center"},on:{click:function(t){return e.showGroupModal(1)}}},[e._v("创建群")]),this.$store.state.superAdminArr.includes(this.$store.state.userId)?t("p",{style:{textAlign:"center"},on:{click:function(t){return e.showGroupModal(2)}}},[e._v("创建聊天室")]):e._e()]),t("a-icon",{staticClass:"trigger",style:{margin:"0 24px 0 0",lineHeight:"0",padding:"0"},attrs:{type:"usergroup-add"}})],2),t("a-popover",{attrs:{placement:"bottomRight"}},[t("template",{slot:"content"},[t("p",{on:{click:function(t){e.ifShow=!0}}},[e._v("个人信息")]),t("p",{on:{click:e.closed}},[e._v("退出")])]),t("template",{slot:"title"},[t("span",[e._v(e._s(this.$store.state.userId??"用户名"))])]),t("span",{staticStyle:{float:"right","margin-right":"16px"}},[t("a-badge",[t("a-avatar",{attrs:{shape:"square",icon:"user"}})],1)],1)],2),t("span",{staticClass:"trigger",staticStyle:{float:"right"},on:{click:e.showMessage}},[t("a-badge",{attrs:{dot:e.friendsEventStatus}},[t("a-icon",{style:{fontSize:"18px"},attrs:{type:"bell"}})],1)],1)],1),t("personal-information",{attrs:{show:e.ifShow},on:{onclose:e.onclose}}),t("chat-content",{attrs:{userid:e.UserID,type:e.chatType,sendid:e.sendID}})],1)],1),t("add-ition",{attrs:{status:e.visible,addstatus:e.addstatus},on:{addhandle:e.addhandle}}),t("estab-iish",{attrs:{"group-status":e.groupstatus,GroupModalstatus:e.GroupModalstatus},on:{grouphandle:e.grouphandle}}),t("black-list",{attrs:{blackstatus:e.blackstatus,blackid:e.blackid},on:{blackvisible:e.blackvisible}}),t("message-receipt",{attrs:{messageStatus:e.messageStatus},on:{MsgStatus:e.MsgStatus}})],1)},je=[],Se=function(){var e=this,t=e._self._c;return t("div",[t("a-drawer",{attrs:{title:"个人信息",width:360,visible:e.visible,"body-style":{paddingBottom:"80px"}},on:{close:e.onClose}},[t("a-form",{attrs:{form:e.form,layout:"vertical","hide-required-mark":""}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:20}},[t("a-form-item",{attrs:{label:"昵称"}},[t("a-input",{attrs:{placeholder:"请输入昵称"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:20}},[t("a-form-item",{attrs:{label:"用户ID"}},[t("a-input",{attrs:{disabled:!0},model:{value:this.$store.state.userId,callback:function(t){e.$set(this.$store.state,"userId",t)},expression:"this.$store.state.userId"}})],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:20}},[t("a-form-item",{attrs:{label:"个性签名"}},[t("a-input",{attrs:{placeholder:"无个性，不签名"},model:{value:e.signature,callback:function(t){e.signature=t},expression:"signature"}})],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:20}},[t("a-form-item",{attrs:{label:"性别"}},[t("a-select",{attrs:{placeholder:"请选择你的性别"},model:{value:e.sex,callback:function(t){e.sex=t},expression:"sex"}},[t("a-select-option",{attrs:{value:"1"}},[e._v(" 男 ")]),t("a-select-option",{attrs:{value:"2"}},[e._v(" 女 ")])],1)],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:20}},[t("a-form-item",{attrs:{label:"手机号码"}},[t("a-input",{attrs:{placeholder:"请输入你的手机号码"},model:{value:e.phoneNumber,callback:function(t){e.phoneNumber=t},expression:"phoneNumber"}})],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:20}},[t("a-form-item",{attrs:{label:"出生日期"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{"get-popup-container":e=>e.parentNode},model:{value:e.dateOfBirth,callback:function(t){e.dateOfBirth=t},expression:"dateOfBirth"}})],1)],1)],1)],1),t("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},[t("a-button",{style:{marginRight:"8px"},on:{click:e.onClose}},[e._v(" 取消 ")]),t("a-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(" 提交 ")])],1)],1)],1)},$e=[],Me={name:"PersonalInformation",data(){return{form:this.$form.createForm(this),visible:!1,nickname:"",signature:"",sex:"",phoneNumber:"",dateOfBirth:""}},watch:{show(e){this.visible=e},userInfo(){this.nickname=this.userInfo.nickname,this.signature=this.userInfo.sign,this.sex=this.userInfo.gender,this.phoneNumber=this.userInfo.phone,this.dateOfBirth=this.userInfo.birth}},computed:{...(0,v.rn)(["userInfo"])},props:["show"],methods:{onClose(){this.visible=!1,this.$emit("onclose",this.visible)},submit(){let e={nickname:this.nickname,sign:this.signature,gender:this.sex,phone:this.phoneNumber,birth:this.dateOfBirth._d};E(e),this.$message.success("修改成功"),this.onClose()}}},Re=Me,Te=(0,c.Z)(Re,Se,$e,!1,null,"2fdc1c99",null),Ae=Te.exports,De=function(){var e=this,t=e._self._c;return t("a-layout-content",{class:{blank:null===e.userID},style:{margin:"24px 16px",padding:"24px",background:"#fff",minHeight:"280px"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:null===e.userID,expression:"userID === null"}],staticClass:"blankTitle"},[e._v("畅聊")]),t("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.userID,expression:"userID !== null"}],staticClass:"chatContent",style:{width:"100%",height:"100%"}},[t("a-page-header",{style:{border:"1px solid rgb(235, 237, 240)",padding:"10px 24px"},attrs:{title:e.userid}},[t("a-icon",{staticClass:"trigger setting",style:{fontSize:"26px"},attrs:{type:"ellipsis"},on:{click:e.showpart}})],1),t("div",{ref:"listContent",staticClass:"titleContent"},e._l(this.$store.state.charArr,(function(s,o){return t("ul",{directives:[{name:"show",rawName:"v-show",value:s.to===e.sendID,expression:"n.to === sendID"}],key:o},e._l(s.arr,(function(s,o){return t("li",{key:o},[t("span",{class:{rightIcon:s.from===e.username,leftIcon:s.from!==e.username}},[t("a-avatar",{attrs:{shape:"square",icon:"user"}}),s.from===e.username&&"singleChat"===s.chatType?t("span",[e._v(e._s(s.from))]):e._e(),s.from!==e.username&&"singleChat"===s.chatType?t("span",[e._v(e._s(s.from))]):e._e(),"singleChat"!==s.chatType?t("span",[e._v(e._s(s.from))]):e._e()],1),0===s.ext.key1?t("div",{class:{right:s.from===e.username,left:s.from!==e.username}},[e._v(" "+e._s(s.msg))]):e._e(),2===s.ext.key1?t("div",{staticClass:"file-box",class:{fileRight:s.from===e.username,fileLeft:s.from!==e.username,pic:1===s.ext.key1}},[t("div",[t("p",{staticClass:"title"},[e._v("文件")]),t("h3",[e._v(e._s(s.msg))]),t("span",{staticClass:"click-download"},[e._v("点击下载")])])]):e._e(),1===s.ext.key1?t("div",{staticClass:"file-box",class:{fileRight:s.from===e.username,fileLeft:s.from!==e.username,pic:1===s.ext.key1}},[1===s.ext.key1?t("div",[t("p",{staticClass:"title"},[e._v("图片")]),t("img",{attrs:{src:s.msg}})]):e._e()]):e._e()])})),0)})),0),t("div",{staticClass:"iconContent"},[t("a-tooltip",{attrs:{placement:"bottom",mouseEnterDelay:1},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{style:{fontSize:"12px"}},[e._v("表情")])]},proxy:!0}])},[t("a-icon",{attrs:{type:"smile"}})],1),t("a-tooltip",{style:{position:"relative"},attrs:{placement:"bottom",mouseEnterDelay:1},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{style:{fontSize:"12px"}},[e._v("图片")])]},proxy:!0}])},[t("label",[t("a-icon",{attrs:{type:"picture"}}),t("input",{staticClass:"file",attrs:{type:"file"},on:{change:function(t){return e.previewFile(t,1)}}})],1)]),t("a-tooltip",{style:{position:"relative"},attrs:{placement:"bottom",mouseEnterDelay:1},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{style:{fontSize:"12px"}},[e._v("发送文件")])]},proxy:!0}])},[t("label",[t("a-icon",{attrs:{type:"folder"}}),t("input",{staticClass:"file",attrs:{type:"file"},on:{change:function(t){return e.previewFile(t,2)}}})],1)]),t("a-tooltip",{attrs:{placement:"bottom",mouseEnterDelay:1},on:{click:e.chatHisFrom},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{style:{fontSize:"12px"}},[e._v("聊天记录")])]},proxy:!0}])},[t("a-icon",{attrs:{type:"message"}})],1)],1),t("div",{staticClass:"titleInput"},[t("a-textarea",{style:{border:"none",outline:"none"},attrs:{bordered:!1,"max-length":196},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.sendMsg.apply(null,arguments):null}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),t("a-tooltip",{attrs:{placement:"top",mouseEnterDelay:1,trigger:"focus"},scopedSlots:e._u([""===e.text?{key:"title",fn:function(){return[t("span",{style:{fontSize:"12px"}},[e._v("不能输入为空")])]},proxy:!0}:null],null,!0)},[t("a-tooltip",{attrs:{placement:"bottom",mouseEnterDelay:1},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{style:{fontSize:"12px"}},[e._v("按Enter换行,按Ctrl+Enter发送")])]},proxy:!0}])},[t("a-button",{staticClass:"enterBtn",on:{click:e.sendMsg}},[e._v("发送")])],1)],1)],1)],1),t("particulars-module",{attrs:{showpart:e.showPart,chatType:e.chatType,userName:e.userID,userID:e.sendID},on:{showpartStatus:e.showpartStatus}}),t("message-roaming",{attrs:{roamingStatus:e.roamingStatus},on:{roamStatus:e.roamStatus}})],1)},Ge=[],Le=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:"聊天记录",visible:e.visible,footer:null,afterClose:e.handleCancel},on:{cancel:e.handleCancel}},[t("ul",{staticClass:"chatHistory"},e._l(e.chatHistoryArr,(function(s){return t("li",{key:s.id},[t("div",[t("a-avatar",{attrs:{shape:"square",icon:"user"}})],1),t("div",[e._v(" "+e._s(s.from)+" "),t("p",{staticClass:"text"},[e._v(e._s(s.msg))])]),t("div",[t("span",[e._v(e._s(e.getHistoryTime(s.time)))])])])})),0)])],1)},Ee=[],Ne={name:"MessageRoaming",data(){return{visible:!1}},computed:{...(0,v.rn)(["chatHistoryArr"])},props:["roamingStatus"],watch:{roamingStatus(e){this.visible=e,console.log(this.messageRom)}},methods:{handleCancel(){this.visible=!1,this.$emit("roamStatus",this.visible)},getHistoryTime(e){return new Date(parseInt(e)).toLocaleString().replace(/年|月/g,"-").replace(/日/g," ")}}},Oe=Ne,ze=(0,c.Z)(Oe,Le,Ee,!1,null,"2d9fee8d",null),Fe=ze.exports,Ue=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:e.partUserName,afterClose:e.handleCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("p",["singleChat"===e.partChatType?t("span",[e._v("用户id:")]):e._e(),"groupChat"===e.partChatType?t("span",[e._v("群组id:")]):e._e(),"chatRoom"===e.partChatType?t("span",[e._v("聊天室id:")]):e._e(),e._v(" "+e._s(e.partUserId))]),"singleChat"===e.partChatType?t("div",e._l(this.$store.state.friendsInfo,(function(s,o){return t("p",{key:o},["nickname"===o?t("span",[e._v("昵称")]):e._e(),"sign"===o?t("span",[e._v("个性签名")]):e._e(),"gender"===o?t("span",[e._v("性别")]):e._e(),"phone"===o?t("span",[e._v("手机号码")]):e._e(),"birth"===o?t("span",[e._v("生日")]):e._e(),e._v(" :"+e._s(s))])})),0):e._e(),"groupChat"===e.partChatType?t("p",[e._v("群主: "+e._s(this.$store.state.groupInfo.owner))]):e._e(),"groupChat"===e.partChatType?t("p",[e._v("群成员列表:")]):e._e(),"groupChat"===e.partChatType?t("a-menu",{attrs:{mode:"inline"}},e._l(this.$store.state.groupMember,(function(s){return t("a-menu-item",{key:s.owner??s.member,on:{click:function(t){e.groupMemberID=s.owner??s.member}}},[t("span",{staticClass:"nav-text"},[e._v(" "+e._s(s.owner??s.member)),s.owner?t("span",[e._v("(群主)")]):e._e()])])})),1):e._e(),"chatRoom"===e.partChatType?t("p",[e._v("创建者: "+e._s(this.$store.state.chatRoomInfo.owner)+" ")]):e._e(),"chatRoom"===e.partChatType?t("p",[e._v("聊天室成员列表:")]):e._e(),"chatRoom"===e.partChatType?t("a-menu",{attrs:{mode:"inline"}},e._l(this.$store.state.chatRoomMember,(function(s){return t("a-menu-item",{key:s.owner??s.member,on:{click:function(t){e.chatRoomMemberID=s.owner??s.member}}},[t("span",{staticClass:"nav-text"},[e._v(" "+e._s(s.owner??s.member)),s.owner?t("span",[e._v("(创建者)")]):e._e()])])})),1):e._e(),t("template",{slot:"footer"},["singleChat"===e.partChatType?t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleCancel(1)}}},[e._v(" 加入黑名单 ")]):e._e(),"singleChat"===e.partChatType?t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleCancel(2)}}},[e._v(" 删除好友 ")]):e._e(),"groupChat"===e.partChatType&&this.$store.state.groupInfo.owner===this.$store.state.userId?t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleCancel(3)}}},[e._v(" 解散该群 ")]):e._e(),"groupChat"===e.partChatType&&this.$store.state.groupInfo.owner===this.$store.state.userId?t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleCancel(4)}}},[e._v(" 踢出群聊 ")]):e._e(),"groupChat"===e.partChatType&&this.$store.state.groupInfo.owner!==this.$store.state.userId?t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleCancel(5)}}},[e._v(" 退出群聊 ")]):e._e(),"chatRoom"===e.partChatType&&this.$store.state.chatRoomInfo.owner===this.$store.state.userId?t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleCancel(6)}}},[e._v(" 踢出聊天室 ")]):e._e(),"chatRoom"===e.partChatType&&this.$store.state.chatRoomInfo.owner===this.$store.state.userId?t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleCancel(7)}}},[e._v(" 解散聊天室 ")]):e._e(),"chatRoom"===e.partChatType&&this.$store.state.chatRoomInfo.owner!==this.$store.state.userId?t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleCancel(8)}}},[e._v(" 退出聊天室 ")]):e._e()],1)],2)],1)},Be=[],Pe={name:"ParticularsModule",props:["showpart","chatType","userName","userID"],data(){return{visible:!1,partChatType:null,partUserName:null,partUserId:null,groupMemberID:null,chatRoomMemberID:null}},watch:{showpart(e){this.visible=e},userID(e){this.partUserId=e},chatType(e){this.partChatType=e},userName(e){this.partUserName=e}},methods:{handleCancel(e){this.visible=!1,this.$emit("showpartStatus",this.visible),2===e?(U(this.partUserId),this.$message.success("已成功删除该好友")):1===e?(H(this.partUserId),this.$message.success("已成功加入黑名单")):3===e?(W(this.partUserId),this.$message.success("已成功解散群聊")):4===e?this.groupMemberID!==this.$store.state.userId?(console.log(this.partUserId,this.groupMemberID),J(this.partUserId,this.groupMemberID),this.$message.success("已成功提出群聊")):this.$message.error("不能踢自己噢"):5===e?(K(this.partUserId),this.$message.success("已成功退出群聊")):6===e?this.chatRoomMemberID!==this.$store.state.userId?(Y(this.partUserId,this.chatRoomMemberID),this.$message.success("已成功踢出聊天室")):this.$message.error("不能踢自己噢"):7===e?(te(this.partUserId),this.$message.success("已成功解散聊天室")):8===e&&(ee(this.partUserId),this.$message.success("已成功退出聊天室"))}}},He=Pe,Ze=(0,c.Z)(He,Ue,Be,!1,null,"2efe45fe",null),qe=Ze.exports,Ve={name:"ChatContent",components:{ParticularsModule:qe,MessageRoaming:Fe},data(){return{username:null,userID:null,text:"",chatType:null,sendID:null,visible:!1,showPart:!1,roamingStatus:!1,fileList:[]}},props:["userid","type","sendid"],watch:{userid(e){this.userID=e},type(e){this.chatType=e},sendid(e){this.sendID=e}},methods:{sendMsg(){let e=this.text.trim();e&&(this.username=this.$store.state.userId,G(e,this.chatType,this.sendID,this.username,0),setTimeout((()=>{this.$nextTick((()=>{this.$refs.listContent.scrollTop=this.$refs.listContent.scrollHeight}))}),150),this.text=""),console.log("聊天内容",this.$store.state.charArr)},chatHisFrom(){this.roamingStatus=!0;let e={targetId:this.sendid,pageSize:50,cursor:-1,chatType:this.chatType,searchDirection:"up"};z(e)},roamStatus(e){this.roamingStatus=e},showpart(){this.showPart=!0,"singleChat"===this.chatType?L(this.sendID,2):"groupChat"===this.chatType?q(this.sendID):"chatRoom"===this.chatType&&Q(this.sendID)},showpartStatus(e){this.showPart=e},previewFile(e,t){if(e.srcElement.files.length>0){if(this.username=this.$store.state.userId,1===t){let s=new FileReader;s.readAsDataURL(e.srcElement.files[0]),s.onload=()=>{G(s.result,this.chatType,this.sendID,this.username,t)}}2===t&&G(e.srcElement.files[0].name,this.chatType,this.sendID,this.username,t)}setTimeout((()=>{this.$nextTick((()=>{this.$refs.listContent.scrollTop=this.$refs.listContent.scrollHeight}))}),180)}}},We=Ve,Je=(0,c.Z)(We,De,Ge,!1,null,null,null),Ke=Je.exports,Qe=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:e.title,afterClose:e.afterClose},scopedSlots:e._u([{key:"footer",fn:function(){return[3!==e.addstatus?t("a-button",{key:"back",on:{click:e.handleError}},[e._v(" 取消 ")]):e._e(),3!==e.addstatus?t("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.handleOk}},[e._v(" 发送 ")]):e._e(),3===e.addstatus?t("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.handleChatRoom}},[e._v(" 加入 ")]):e._e()]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[3!==e.addstatus?t("a-input-search",{attrs:{placeholder:"请输入ID号"},on:{search:e.onSearch},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):e._e(),3===e.addstatus?t("a-menu",{attrs:{mode:"inline"}},e._l(this.$store.state.chatRoom,(function(s){return t("a-menu-item",{key:s.id,on:{click:function(t){return e.addChatRoom(s.id,s.name)}}},[t("span",{staticClass:"nav-text"},[e._v(e._s(s.name))])])})),1):e._e()],1)],1)},Xe=[],Ye={name:"AddItion",data(){return{visible:!1,value:"",title:null,actIndex:null,chatRoomName:""}},watch:{status(e){this.visible=e},addstatus(e){1===e?this.title="添加好友":2===e?this.title="添加群":3===e&&(this.title="添加聊天室")}},props:["status","addstatus"],methods:{handleOk(){this.visible=!1,this.$emit("addhandle",!1),this.value.trim()&&this.onSearch(this.value.trim())},handleError(){this.visible=!1,this.$emit("addhandle",!1)},afterClose(){this.visible=!1,this.$emit("addhandle",!1)},onSearch(e){if(1===this.addstatus)N(e);else if(2===this.addstatus){let t={groupId:e,message:`我是${this.$store.state.userId}`};O(t)}else 3===this.addstatus&&console.log(this.addstatus);this.success()},success(){this.$message.success("发送请求成功")},addChatRoom(e,t){this.actIndex=e,this.chatRoomName=t},handleChatRoom(){this.visible=!1,this.$emit("addhandle",!1),Z(this.actIndex,this.chatRoomName)}}},et=Ye,tt=(0,c.Z)(et,Qe,Xe,!1,null,"79ec3b22",null),st=tt.exports,ot=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:e.title,afterClose:e.afterClose},scopedSlots:e._u([{key:"footer",fn:function(){return[t("a-button",{attrs:{type:"primary"},on:{click:e.creatGroupOrRoom}},[e._v(" 创建 ")])]},proxy:!0}]),model:{value:e.Groupvisible,callback:function(t){e.Groupvisible=t},expression:"Groupvisible"}},[1===e.GroupModalstatus?t("div",[t("p",[t("a-input",{attrs:{placeholder:"输入群名字"},model:{value:e.Groupname,callback:function(t){e.Groupname=t},expression:"Groupname"}})],1),t("p",[t("a-textarea",{attrs:{placeholder:"请输入群简介","auto-size":{minRows:3,maxRows:5}},model:{value:e.txt,callback:function(t){e.txt=t},expression:"txt"}})],1),t("span",[e._v("群组类型")]),t("p",[t("a-radio-group",{on:{change:e.onChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("a-radio",{attrs:{value:1}},[e._v(" 公开群 ")]),t("a-radio",{attrs:{value:2}},[e._v(" 私有群 ")])],1)],1),t("span",[e._v("加群权限")]),t("p",[t("a-radio-group",{on:{change:e.onChange},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}},[t("a-radio",{attrs:{value:1}},[e._v(" 需审批 ")]),t("a-radio",{attrs:{value:2}},[e._v(" 随便加 ")])],1)],1)]):e._e()])],1)},at=[],nt={name:"EstabIish",data(){return{Groupvisible:!1,title:null,txt:"",value:1,value2:1,Groupname:""}},props:["GroupStatus","GroupModalstatus"],watch:{GroupStatus(e){this.Groupvisible=e},GroupModalstatus(e){1===e?this.title="创建群":2===e&&(this.title="创建聊天室")}},methods:{afterClose(){this.Groupvisible=!1,this.$emit("grouphandle",this.Groupvisible)},onChange(e){console.log("radio checked",e.target.value)},creatGroupOrRoom(){1===this.GroupModalstatus&&(this.Groupname.trim()?(F(this.Groupname,this.txt,this.value,this.value2),this.$message.success("群聊已经创建成功"),this.Groupvisible=!1):this.$message.error("请输入群聊名称"))}}},rt=nt,it=(0,c.Z)(rt,ot,at,!1,null,"64335634",null),lt=it.exports,ct=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:"黑名单",afterClose:e.afterClose},model:{value:e.blackvisible,callback:function(t){e.blackvisible=t},expression:"blackvisible"}},[t("template",{slot:"footer"},[t("a-button",{key:"back",on:{click:function(t){return e.handleCancel(1)}}},[e._v(" 否 ")]),t("a-button",{key:"submit",attrs:{type:"primary"},on:{click:function(t){return e.handleCancel(2)}}},[e._v(" 是 ")])],1),t("p",[e._v("是否将"+e._s(e.id)+"移出黑名单")])],2)],1)},ut=[],dt={name:"BlackList",data(){return{blackvisible:!1,id:null}},props:["blackstatus","blackid"],watch:{blackstatus(e){this.blackvisible=e},blackid(e){this.id=e}},methods:{afterClose(){this.blackvisible=!1,this.$emit("blackvisible",this.blackvisible)},handleCancel(e){this.blackvisible=!1,this.$emit("blackvisible",this.blackvisible),2===e&&(P(this.id),this.$message.success("已经移出黑名单"))}}},pt=dt,ht=(0,c.Z)(pt,ct,ut,!1,null,"7f47df94",null),mt=ht.exports,gt=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:"消息",visible:e.visible,footer:null},on:{cancel:e.handleCancel}},[e.friendsEventStatus?t("div",{staticClass:"msg-box"},[t("ul",e._l(e.friendsEventVal,(function(s,o){return t("li",{key:o},[t("div",{staticClass:"icon"},[t("a-avatar",{attrs:{shape:"square",size:"large",icon:"user"}})],1),t("div",{staticClass:"text-box"},[t("h3",[e._v(e._s(s.from))]),t("span",[e._v(e._s(s.status))])]),t("div",{staticClass:"btn-box"},[t("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.agreeAddFunc(s.from)}}},[e._v("同意添加")]),t("a-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.refuseAddFunc(s.from)}}},[e._v("拒绝添加")])],1)])})),0)]):t("div",[t("a-empty",{attrs:{description:"暂无消息......"}})],1)])],1)},ft=[],vt={name:"MessageReceipt",data(){return{visible:!1}},computed:{...(0,v.rn)(["friendsEventVal"]),...(0,v.Se)(["friendsEventStatus"])},props:["messageStatus"],watch:{messageStatus(e){this.visible=e}},methods:{handleCancel(){this.visible=!1,this.$emit("MsgStatus",this.visible)},agreeAddFunc(e){R(e)},refuseAddFunc(e){T(e)}}},bt=vt,kt=(0,c.Z)(bt,gt,ft,!1,null,"6a0662d9",null),yt=kt.exports,_t={name:"IndexView",components:{PersonalInformation:Ae,ChatContent:Ke,AddItion:st,EstabIish:lt,BlackList:mt,MessageReceipt:yt},data(){return{collapsed:!1,ifShow:!1,UserID:null,chatType:null,sendID:null,SingleChat:"singleChat",GroupChat:"groupChat",ChatRoom:"chatRoom",show:!0,visible:!1,groupstatus:!1,addstatus:null,GroupModalstatus:null,blackstatus:!1,blackid:null,messageStatus:!1}},created(){ke();let e=JSON.parse(f().get("token"));j(e.userId,e.token)},computed:{...(0,v.rn)(["List","userId","msgTips"]),...(0,v.Se)(["friendsEventStatus"]),token(){return f().get("token")}},watch:{msgTips(e){0===e.key&&this.$notification.open({message:this.msgTips.from,description:this.msgTips.msg}),1===e.key&&this.$notification.open({message:this.msgTips.from,description:"对方发送了一张图片"}),2===e.key&&this.$notification.open({message:this.msgTips.from,description:"对方发送了一张文件"})}},methods:{closed(){$(),setTimeout((()=>{this.$router.replace("/")}),500)},onclose(e){this.ifShow=e},getUserID(e,t,s){"黑名单"!==t?(this.UserID=e,this.sendID=s,"好友"===t?this.chatType=this.SingleChat:"群组"===t?this.chatType=this.GroupChat:"聊天室"===t&&(this.chatType=this.ChatRoom)):(this.blackid=s,this.blackstatus=!0)},showModal(e){(1===e||2===e||3===e)&&(this.addstatus=e),this.visible=!0},addhandle(e){this.visible=e},showGroupModal(e){(1===e||2===e)&&(this.GroupModalstatus=e),this.groupstatus=!0},grouphandle(e){this.groupstatus=e},blackvisible(e){this.blackstatus=e},showMessage(){this.messageStatus=!0},MsgStatus(e){this.messageStatus=e},...(0,v.OI)(["msgTipsFunc"])}},Ct=_t,It=(0,c.Z)(Ct,we,je,!1,null,"6c95b491",null),xt=It.exports;o.ZP.use(p.ZP);const wt=[{path:"/",name:"default",component:de},{path:"/login",name:"login",component:de},{path:"/register",name:"register",component:xe},{path:"/index",name:"index",component:xt,meta:{requireAuth:!0}}],jt=new p.ZP({mode:"hash",base:"",routes:wt});jt.beforeEach(((e,t,s)=>{e.meta.requireAuth?f().get("token")?s():setTimeout((()=>{s({path:"/",query:{redirect:e.fullPath,state:"notlogin"}})}),100):s()}));var St=jt,$t=s(93012),Mt=(s(62467),s(69198));o.ZP.use(Mt.ZP),o.ZP.use($t.Z,{reqHandleFunc:e=>e,reqErrorFunc:e=>Promise.reject(e),resHandleFunc:e=>e,resErrorFunc:e=>Promise.reject(e)}),new o.ZP({WebIm:x,router:St,store:b,render:e=>e(d)}).$mount("#app")}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,function(){var e=[];s.O=function(t,o,a,n){if(!o){var r=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],n=e[u][2];for(var i=!0,l=0;l<o.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((function(e){return s.O[e](o[l])}))?o.splice(l--,1):(i=!1,n<r&&(r=n));if(i){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,a,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,n,r=o[0],i=o[1],l=o[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(l)var u=l(s)}for(t&&t(o);c<r.length;c++)n=r[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(u)},o=self["webpackChunklive_chat"]=self["webpackChunklive_chat"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(72092)}));o=s.O(o)})();
//# sourceMappingURL=app.a0698f1a.js.map